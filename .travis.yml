sudo: required
dist: trusty
language: java
jdk:
  - openjdk8
  - openjdk9

env:
  - COVERAGE=0.057 TARGET=./monolithic/ui
  - COVERAGE=0.148 TARGET=./monolithic/service/cart
  - COVERAGE=0.0 TARGET=./monolithic/service/user
  - COVERAGE=0.36 TARGET=./monolithic/repository/order
  - COVERAGE=0.0 TARGET=./monolithic/repository/cart
  - COVERAGE=0.124 TARGET=./monolithic/repository/product
  - COVERAGE=0.318 TARGET=./monolithic/repository/user

install:
  - "./gradlew clean jar"

script:
  - "COVERAGE=${COVERAGE} ./gradlew -p ./monolithic/$TARGET check"

jobs:
  include:
    stage: deploy
    deploy:
      - provider: script
        script: echo "WIP"
        on:
          all_branches: true